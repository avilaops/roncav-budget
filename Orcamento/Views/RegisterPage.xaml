<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Orcamento.ViewModels"
             x:Class="Orcamento.Views.RegisterPage"
             x:DataType="viewmodels:RegisterViewModel"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource PrimaryBackground}">

    <ScrollView>
        <VerticalStackLayout Padding="40,60,40,40"
                Spacing="24">

            <!-- Cabeçalho -->
            <VerticalStackLayout Spacing="8"
                    Margin="0,0,0,24">
                <HorizontalStackLayout Spacing="8">
                    <Label Text="←"
                           FontSize="24"
                           TextColor="{StaticResource PrimaryText}"
                           VerticalOptions="Center">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoBackCommand}"/>
                        </Label.GestureRecognizers>
                    </Label>
                    <Label Text="Criar conta"
                           FontSize="28"
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryText}"
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
                <Label Text="Preencha seus dados para começar"
                       FontSize="16"
                       TextColor="{StaticResource SecondaryText}"/>
            </VerticalStackLayout>

            <!-- Formulário de Registro -->
            <VerticalStackLayout Spacing="16">

                <!-- Nome -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Nome completo"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryText}"/>
                    <Border StrokeThickness="1"
                            Stroke="{StaticResource CardBorder}"
                            BackgroundColor="{StaticResource CardBackground}"
                            Padding="16,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>

                        <Entry Text="{Binding Nome}"
                               Placeholder="Seu nome completo"
                               TextColor="{StaticResource PrimaryText}"
                               PlaceholderColor="{StaticResource SecondaryText}"/>
                    </Border>
                </VerticalStackLayout>

                <!-- Email -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="E-mail"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryText}"/>
                    <Border StrokeThickness="1"
                            Stroke="{StaticResource CardBorder}"
                            BackgroundColor="{StaticResource CardBackground}"
                            Padding="16,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>

                        <Entry Text="{Binding Email}"
                               Placeholder="seu@email.com"
                               Keyboard="Email"
                               TextColor="{StaticResource PrimaryText}"
                               PlaceholderColor="{StaticResource SecondaryText}"/>
                    </Border>
                </VerticalStackLayout>

                <!-- Senha -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Senha"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryText}"/>
                    <Border StrokeThickness="1"
                            Stroke="{StaticResource CardBorder}"
                            BackgroundColor="{StaticResource CardBackground}"
                            Padding="16,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>

                        <Entry Text="{Binding Senha}"
                               Placeholder="Mínimo 8 caracteres"
                               IsPassword="True"
                               TextColor="{StaticResource PrimaryText}"
                               PlaceholderColor="{StaticResource SecondaryText}"/>
                    </Border>
                    <Label Text="Use letras, números e caracteres especiais"
                           FontSize="12"
                           TextColor="{StaticResource SecondaryText}"/>
                </VerticalStackLayout>

                <!-- Confirmar Senha -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="Confirmar senha"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryText}"/>
                    <Border StrokeThickness="1"
                            Stroke="{StaticResource CardBorder}"
                            BackgroundColor="{StaticResource CardBackground}"
                            Padding="16,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>

                        <Entry Text="{Binding ConfirmarSenha}"
                               Placeholder="Digite a senha novamente"
                               IsPassword="True"
                               TextColor="{StaticResource PrimaryText}"
                               PlaceholderColor="{StaticResource SecondaryText}"/>
                    </Border>
                </VerticalStackLayout>

                <!-- Aceitar termos -->
                <HorizontalStackLayout Spacing="12"
                        Margin="0,8,0,0">
                    <CheckBox IsChecked="{Binding AceitouTermos}"
                              Color="{StaticResource AccentPrimary}"/>
                    <Label VerticalOptions="Center">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="Eu aceito os "
                                      TextColor="{StaticResource PrimaryText}"
                                      FontSize="14"/>
                                <Span Text="Termos de Uso"
                                      TextColor="{StaticResource AccentPrimary}"
                                      FontSize="14"
                                      FontAttributes="Bold"/>
                                <Span Text=" e a "
                                      TextColor="{StaticResource PrimaryText}"
                                      FontSize="14"/>
                                <Span Text="Política de Privacidade"
                                      TextColor="{StaticResource AccentPrimary}"
                                      FontSize="14"
                                      FontAttributes="Bold"/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                </HorizontalStackLayout>

                <!-- Botão Criar conta -->
                <Button Text="Criar minha conta"
                        Command="{Binding RegisterCommand}"
                        IsEnabled="{Binding IsNotBusy}"
                        BackgroundColor="{StaticResource AccentPrimary}"
                        TextColor="White"
                        FontSize="16"
                        FontAttributes="Bold"
                        HeightRequest="54"
                        CornerRadius="12"
                        Margin="0,16,0,0">
                    <Button.Shadow>
                        <Shadow Brush="{StaticResource AccentPrimary}"
                                Opacity="0.3"
                                Radius="12"
                                Offset="0,4"/>
                    </Button.Shadow>
                </Button>

                <!-- Loading Indicator -->
                <ActivityIndicator IsRunning="{Binding IsBusy}"
                                   IsVisible="{Binding IsBusy}"
                                   Color="{StaticResource AccentPrimary}"
                                   HeightRequest="40"/>

                <!-- Mensagem de erro -->
                <Label Text="{Binding ErrorMessage}"
                       IsVisible="{Binding HasError}"
                       TextColor="{StaticResource ErrorRed}"
                       FontSize="14"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"
                       Margin="0,8,0,0"/>

            </VerticalStackLayout>

            <!-- Já tem conta -->
            <HorizontalStackLayout Spacing="4"
                    HorizontalOptions="Center"
                    Margin="0,16,0,0">
                <Label Text="Já tem uma conta?"
                       FontSize="14"
                       TextColor="{StaticResource SecondaryText}"/>
                <Label Text="Entrar"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="{StaticResource AccentPrimary}">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoToLoginCommand}"/>
                    </Label.GestureRecognizers>
                </Label>
            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
