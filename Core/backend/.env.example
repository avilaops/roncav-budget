# =============================================================================
# ERP/CRM Faria Lima - Backend Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=3000
RUST_LOG=info,erp_backend=debug
RUN_MIGRATIONS=true

# -----------------------------------------------------------------------------
# Database - PostgreSQL
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://erp_user:secure_password@localhost:5432/erp

# Connection Pool
DB_MAX_CONNECTIONS=100
DB_MIN_CONNECTIONS=10

# -----------------------------------------------------------------------------
# Cache - Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_POOL_SIZE=10

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# IMPORTANTE: Gerar com: openssl rand -base64 32
JWT_SECRET=your_super_secret_key_minimum_32_characters_long_please_change_this

# Token Expiration (em horas)
JWT_EXPIRATION_HOURS=8
REFRESH_TOKEN_DAYS=30

# -----------------------------------------------------------------------------
# OAuth / SSO (Opcional)
# -----------------------------------------------------------------------------
# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_REDIRECT_URI=http://localhost:3000/api/v1/auth/sso/google/callback

# Microsoft OAuth
MICROSOFT_CLIENT_ID=your_microsoft_client_id_here
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret_here

# LinkedIn OAuth
LINKEDIN_CLIENT_ID=your_linkedin_client_id_here
LINKEDIN_CLIENT_SECRET=your_linkedin_client_secret_here

# -----------------------------------------------------------------------------
# Email Service
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_specific_password
SMTP_FROM=noreply@erp.com
SMTP_FROM_NAME=ERP Faria Lima

# -----------------------------------------------------------------------------
# WhatsApp Business API (Opcional)
# -----------------------------------------------------------------------------
WHATSAPP_API_URL=https://api.whatsapp.com/v1
WHATSAPP_API_KEY=your_whatsapp_api_key
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id

# -----------------------------------------------------------------------------
# AWS / Cloud Storage (Opcional)
# -----------------------------------------------------------------------------
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=erp-documents

# -----------------------------------------------------------------------------
# Payment Gateways
# -----------------------------------------------------------------------------
# PIX - Banco Central
PIX_API_URL=https://pix.bcb.gov.br/api/v1
PIX_CLIENT_ID=your_pix_client_id
PIX_CLIENT_SECRET=your_pix_client_secret
PIX_CERT_PATH=/path/to/certificate.pem

# Stripe (Opcional)
STRIPE_API_KEY=sk_test_your_stripe_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# -----------------------------------------------------------------------------
# External APIs & Integrations
# -----------------------------------------------------------------------------
# LinkedIn Sales Navigator
LINKEDIN_API_KEY=your_linkedin_api_key

# Open Finance Brasil
OPEN_FINANCE_API_URL=https://api.openfinance.org.br/v1
OPEN_FINANCE_CLIENT_ID=your_client_id
OPEN_FINANCE_CLIENT_SECRET=your_client_secret

# Receita Federal (NFe)
SEFAZ_AMBIENTE=2  # 1=produção, 2=homologação
SEFAZ_CERTIFICADO_PATH=/path/to/certificate.pfx
SEFAZ_CERTIFICADO_PASSWORD=certificate_password

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
# Sentry (Error Tracking)
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id

# Datadog (APM)
DATADOG_API_KEY=your_datadog_api_key
DATADOG_APP_KEY=your_datadog_app_key

# Prometheus (Metrics)
PROMETHEUS_PORT=9090

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Rate limits por plano (requests per minute)
RATE_LIMIT_STARTUP=100
RATE_LIMIT_BUSINESS=500
RATE_LIMIT_ENTERPRISE=2000

# Rate limit para autenticação (prevenir brute force)
RATE_LIMIT_AUTH_MAX_ATTEMPTS=10
RATE_LIMIT_AUTH_WINDOW_SECONDS=300

# -----------------------------------------------------------------------------
# Background Jobs & Queue
# -----------------------------------------------------------------------------
# RabbitMQ
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_QUEUE_NAME=erp_jobs

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FEATURE_WEBHOOKS_ENABLED=true
FEATURE_AI_SCORING_ENABLED=false
FEATURE_ADVANCED_ANALYTICS_ENABLED=true
FEATURE_MOBILE_API_ENABLED=true

# -----------------------------------------------------------------------------
# Multi-tenancy
# -----------------------------------------------------------------------------
# Método de identificação: subdomain | header | jwt
TENANT_EXTRACTION_METHOD=subdomain
DEFAULT_TENANT_DOMAIN=default

# -----------------------------------------------------------------------------
# Development / Testing
# -----------------------------------------------------------------------------
# Desabilitar em produção
ENABLE_PLAYGROUND=false
ENABLE_GRAPHQL_INTROSPECTION=false
MOCK_EXTERNAL_APIS=false

# Seed data (apenas dev)
SEED_DATABASE=false

# -----------------------------------------------------------------------------
# Compliance & Regulations
# -----------------------------------------------------------------------------
# LGPD
DATA_RETENTION_DAYS=2555  # 7 anos
ENABLE_DATA_ANONYMIZATION=true

# Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Diariamente às 2h
BACKUP_S3_BUCKET=erp-backups

# -----------------------------------------------------------------------------
# Performance Tuning
# -----------------------------------------------------------------------------
# Cache TTLs (em segundos)
CACHE_TTL_USER=900          # 15 min
CACHE_TTL_TENANT=3600       # 1 hora
CACHE_TTL_LEAD=300          # 5 min
CACHE_TTL_FORECAST=600      # 10 min

# Database
DB_STATEMENT_TIMEOUT=30000  # 30 segundos
DB_IDLE_TIMEOUT=600         # 10 minutos

# -----------------------------------------------------------------------------
# Logs
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json  # json | pretty
LOG_FILE=/var/log/erp/backend.log

# Audit logs
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365

# =============================================================================
# NOTAS:
# - NUNCA commitar este arquivo com valores reais
# - Em produção, usar secrets management (AWS Secrets Manager, Azure Key Vault)
# - Gerar JWT_SECRET forte: openssl rand -base64 32
# - Trocar todas as senhas padrão
# - Habilitar SSL/TLS em produção
# =============================================================================
